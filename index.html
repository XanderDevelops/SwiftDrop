<!DOCTYPE html>
<html>
<head>
    <title>SwiftDrop - Local File Transfer</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div id="app-container">
        <h1>SwiftDrop</h1>

        <!-- Step 1: Choose Role -->
        <div id="role-selection-view">
            <h2>What would you like to do?</h2>
            <button id="start-send-button" class="btn btn-primary">Send a File</button>
            <button id="start-receive-button" class="btn btn-secondary">Receive a File</button>
        </div>

        <!-- Sender Step 2: Select a File -->
        <div id="file-selection-view" style="display: none;">
            <h2>Select a File to Send</h2>
            <div id="drop-zone">
                <p>Drag & Drop a file here</p>
                <p>or</p>
                <label for="file-input" class="btn btn-primary">Select File</label>
                <input type="file" id="file-input">
            </div>
            <p id="selected-file-name"></p>
            <button id="back-to-start-button" class="btn btn-secondary">Back</button>
        </div>

        <!-- Handshake View (used by both, but shown at different stages) -->
        <div id="handshake-view" style="display: none;">
            <div id="sender-instructions">
                <h3>Step 1: Share Your Sender Code</h3>
                <p>Copy the code below and send it to the receiving device.</p>
                <textarea id="sender-code-textarea" readonly rows="4"></textarea>
            </div>
            <div id="receiver-instructions">
                <h3>Step 2: Get the Receiver Code</h3>
                <p>Paste the code from the receiving device below and click Connect.</p>
                <textarea id="receiver-code-textarea" placeholder="Paste receiver's code here..." rows="4"></textarea>
                <button id="connect-button" class="btn btn-primary">Connect</button>
            </div>
             <div id="receiver-waiting-message" style="display:none;">
                <h3>Waiting for Sender...</h3>
                <p>Your code has been generated. Once the sender connects, the download will begin automatically.</p>
            </div>
        </div>

        <!-- Progress and Complete Views (These are unchanged) -->
        <div id="progress-view" style="display: none;">...</div>
        <div id="send-complete-view" style="display: none;">...</div>
        <div id="receive-complete-view" style="display: none;">...</div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/streamsaver@2.0.6/StreamSaver.min.js"></script>
    <script src="script.js"></script>
</body>
</html>